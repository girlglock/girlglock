<!doctypehtml><html lang=en><meta charset=UTF-8><meta content="width=device-width,initial-scale=1"name=viewport><title>Voice Frequency Analyzer</title><link href=https://cdn.jsdelivr.net/gh/ekmas/cs16.css@main/css/cs16.min.css rel=stylesheet><style>body{margin:0;padding:20px;background-color:#000;display:flex;justify-content:center;align-items:center;min-height:100vh}.centered{width:100%;max-width:1900px;max-height:1900px}.cs-dialog{position:relative}.heading{position:absolute;top:10px;left:10px;right:10px;display:flex;justify-content:space-between;align-items:center}canvas{width:100%;height:250px;background:var(--secondary-bg);border:1px solid;border-color:var(--border-dark) var(--border-light) var(--border-light) var(--border-dark)}.legend-color{width:12px;height:12px;display:inline-block;margin-right:5px;border:1px solid;border-color:var(--border-light) var(--border-dark) var(--border-dark) var(--border-light)}.frequency-display{font-size:64px;color:#fff;text-align:center;margin:10px 0}fieldset{border:1px solid;border-color:var(--border-dark) var(--border-light) var(--border-light) var(--border-dark);background-color:var(--secondary-bg)}</style><div class=centered><div style=max-width:90vh;max-height:90vh class=cs-dialog><header><div style="margin:35px 20px 20px 20px"class=cs-form-group><h1>VOICE FREQUENCY ANALYZER</h1><div class=cs-tabs><legend>acoustic spectrum</legend><canvas id=frequencyChart></canvas></div><div class=cs-tabs><legend>color meaning:</legend><div style=display:flex;flex-wrap:wrap;justify-content:space-around;padding:5px><div style="padding:8px 12px"><span class=legend-color style=background:rgba(0,255,0,.5)></span> masculine</div><div style="padding:8px 12px"><span class=legend-color style=background:rgba(255,0,255,.5)></span> feminine</div></div></div><div style=display:flex;gap:10px><fieldset style=flex:1><legend>dom frequency</legend><div class=frequency-display id=dominantFreq>-- Hz</div></fieldset><fieldset style=flex:1><legend>in range of:</legend><div style=text-align:center;padding:10px;font-size:64px id=voiceType>--</div></fieldset></div><div class=cs-tabs><legend>volume</legend><div style=text-align:center;padding:10px id=volumeLevel>--</div></div><div class=cs-tabs><legend>recording</legend><div style=display:flex;gap:10px;padding:10px;justify-content:center><button class=cs-btn id=recordBtn>record</button> <button class=cs-btn id=playbackBtn disabled>play</button> <button class=cs-btn id=saveBtn disabled>save</button></div><div style=text-align:center;padding:5px;font-weight:700;color:#f44 id=recordingTimer>00:00</div><div style=text-align:center;padding:5px;font-size:12px id=recordingStatus>--</div></div><div class=cs-tabs><legend>status</legend><div style=text-align:center;padding:10px id=status>initializing...</div></div></div></header></div></div><script>let _0x752e;let audioContext;_0x752e=2;var _0x3384d=0+5;let analyser;_0x3384d=1+1;let _0xc233d;let microphone;_0xc233d=8;var _0x7g_0xd7a=3+8;let dataArray;_0x7g_0xd7a=8+7;let canvas;let canvasContext;let _0xf7b;let animationId;_0xf7b=2;let isAnalyzing=false;var _0x5eaccd=3+2;let frequencyHistory=[];_0x5eaccd="kfkgce";let _0xee883d;let maxHistorySize=150;_0xee883d=4;let _0x9d8f;let mediaRecorder;_0x9d8f=3;let recordedChunks=[];let _0x859gd;let isRecording=false;_0x859gd="fffjoi";let recordedBlob=null;let recordingStartTime=0;let _0x11e;let recordingTimer=null;_0x11e=6+6;const status=document.getElementById('status');var _0xc5b17e=5+1;const dominantFreqElement=document.getElementById('dominantFreq');_0xc5b17e=9+2;const voiceTypeElement=document.getElementById('voiceType');var _0x758f=2+5;const volumeLevelElement=document.getElementById('volumeLevel');_0x758f=6;const recordBtn=document.getElementById('recordBtn');const playbackBtn=document.getElementById('playbackBtn');const saveBtn=document.getElementById('saveBtn');const recordingStatus=document.getElementById('recordingStatus');var _0xb_0xcg7=8+6;const recordingTimerElement=document.getElementById('recordingTimer');_0xb_0xcg7=8;canvas=document.getElementById('frequencyChart');canvasContext=canvas.getContext('2d');function resizeCanvas(){var _0x8d176f=9+3;const _0xd0d6c=canvas.getBoundingClientRect();_0x8d176f=2;canvas.width=_0xd0d6c.width*window.devicePixelRatio;canvas.height=_0xd0d6c.height*window.devicePixelRatio;canvasContext.scale(window.devicePixelRatio,window.devicePixelRatio);}resizeCanvas();window.addEventListener('resize',resizeCanvas);recordBtn.addEventListener('click',toggleRecording);playbackBtn.addEventListener('click',playRecording);saveBtn.addEventListener('click',saveRecording);async function initializeAnalysis(){try{status.textContent="requesting microphone access...";const _0x2167ea=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:false,noiseSuppression:true,autoGainControl:false,channelCount:2}});audioContext=new(window.AudioContext||window.webkitAudioContext)();const _0xg_0x68c=audioContext.createMediaStreamSource(_0x2167ea);let _0xbcc5b;const _0x331b8c=audioContext.createChannelSplitter(2);_0xbcc5b="fokohb";const _0xf77bff=audioContext.createChannelMerger(2);const _0xaaf3b=audioContext.createGain();var _0x6cdg=3+3;const _0xd2e67a=audioContext.createGain();_0x6cdg=6;_0xaaf3b.gain.value=0.5;_0xd2e67a.gain.value=0.5;_0xg_0x68c.connect(_0x331b8c);_0x331b8c.connect(_0xaaf3b,0);_0x331b8c.connect(_0xd2e67a,0);_0xaaf3b.connect(_0xf77bff,0,0);_0xaaf3b.connect(_0xf77bff,0,1);_0xd2e67a.connect(_0xf77bff,0,0);_0xd2e67a.connect(_0xf77bff,0,1);analyser=audioContext.createAnalyser();_0xf77bff.connect(analyser);analyser.fftSize=4096;analyser.smoothingTimeConstant=0.8;dataArray=new Uint8Array(analyser.frequencyBinCount);const _0xf9c=audioContext.createMediaStreamDestination();_0xf77bff.connect(_0xf9c);mediaRecorder=new MediaRecorder(_0xf9c.stream,{mimeType:'audio/webm;codecs=opus'});mediaRecorder.ondataavailable=handleDataAvailable;mediaRecorder.onstop=handleRecordingStop;isAnalyzing=!![];status.textContent="okak";draw();}catch(err){status.textContent="error: could not access microphone. "+err.message.toLowerCase();}}function draw(){if(!isAnalyzing)return;animationId=requestAnimationFrame(draw);analyser.getByteFrequencyData(dataArray);const _0x71ea=canvas.width/window.devicePixelRatio;const _0x5cc4fb=canvas.height/window.devicePixelRatio;canvasContext.fillStyle='#3e4637';canvasContext.fillRect(0,0,_0x71ea,_0x5cc4fb);drawFrequencyRanges(_0x71ea,_0x5cc4fb);const{dominantFreq,volume}=analyzeDominantFrequency();if(dominantFreq>0){frequencyHistory.push(dominantFreq);if(frequencyHistory.length>maxHistorySize){frequencyHistory.shift();}}updateInfo(dominantFreq,volume);drawSpectrum(_0x71ea,_0x5cc4fb);if(dominantFreq>0){highlightDominantFrequency(dominantFreq,_0x71ea,_0x5cc4fb);}}function drawFrequencyRanges(width,height,_0xae338f,_0x84b7e){_0x84b7e=500;_0xae338f=3;var _0x4ec5a=4+2;const _0xae4c=85/_0x84b7e*width;_0x4ec5a=0+1;const _0x7beb=180/_0x84b7e*width;canvasContext.fillStyle='rgba(0, 255, 0, 0.3)';canvasContext.fillRect(_0xae4c,0,_0x7beb-_0xae4c,height);var _0x81436g=3+7;const _0x3d0c=165/_0x84b7e*width;_0x81436g=2;var _0x2cea=8+4;const _0x88f8e=265/_0x84b7e*width;_0x2cea="lpmppm";canvasContext.fillStyle='rgba(255, 0, 255, 0.3)';canvasContext.fillRect(_0x3d0c,0,_0x88f8e-_0x3d0c,height);canvasContext.fillStyle='#c0c0c0';canvasContext.font='11px monospace';canvasContext.textAlign='center';var _0x695e=2+4;const _0x_0xcaa=[100,200,300,400,500];_0x695e="obgpbq";_0x_0xcaa.forEach(freq=>{var _0x494f4b=5+7;const x=freq/_0x84b7e*width;_0x494f4b=1;canvasContext.fillText(freq+'Hz',x,height-5);});}function drawSpectrum(width,height,_0x2_0x837){_0x2_0x837=500;var _0xa2dca=9+4;const _0xe_0x335=width/(dataArray.length*(_0x2_0x837/(audioContext.sampleRate/2)));_0xa2dca=8;canvasContext.fillStyle='#ff0000';for(let i=0;i<dataArray.length*(_0x2_0x837/(audioContext.sampleRate/2));i++){const _0xb425bf=dataArray[i]/255*height;let _0x8bc;const x=i*_0xe_0x335;_0x8bc=1+7;canvasContext.fillRect(x,height-_0xb425bf,_0xe_0x335-1,_0xb425bf);}}function analyzeDominantFrequency(_0x6ed42f,_0x404gb,_0xdacd,_0xb815fa,_0xafdba,_0x3g6ceb,_0x55d23e){const _0xgbec=audioContext.sampleRate/2;_0x404gb=500;_0x6ed42f="nqeobe";const _0x8cc91a=Math.floor(_0x404gb/_0xgbec*dataArray.length);var _0x7692b=3+1;let _0x248f=[];_0x7692b=7+3;_0xdacd=0;for(let i=1;i<_0x8cc91a;i++){_0xdacd+=dataArray[i];if(dataArray[i]>50){var _0x34db8e=0+4;const _0xa24a=i/dataArray.length*_0xgbec;_0x34db8e=4;_0x248f.push({freq:_0xa24a,amplitude:dataArray[i]});}}if(_0x248f.length===0){return{dominantFreq:0,volume:_0xdacd/_0x8cc91a};}_0x248f.sort((a,b)=>b.amplitude-a.amplitude);_0xb815fa=0;_0x3g6ceb=60;_0xafdba=2+8;_0x55d23e=350;for(let peak of _0x248f){if(peak.freq>=_0x3g6ceb&&peak.freq<=_0x55d23e){var _0x76ce=0+8;let _0xcea=!![];_0x76ce=5+2;for(let _0xfe4d9e=2;_0xfe4d9e<=4;_0xfe4d9e++){const _0x3_0x0f1=peak.freq*_0xfe4d9e;let _0xfca;const _0x48bc=_0x248f.some(p=>Math.abs(p.freq-_0x3_0x0f1)<10&&p.amplitude>peak.amplitude*0.3);_0xfca=8+9;if(!_0x48bc&&_0xfe4d9e<=3){_0xcea=false;break;}}if(_0xcea){_0xb815fa=peak.freq;break;}}}if(_0xb815fa===0&&_0x248f.length>0){for(let peak of _0x248f){if(peak.freq>=_0x3g6ceb&&peak.freq<=_0x55d23e){_0xb815fa=peak.freq;break;}}}const _0xe534ff=_0xdacd/_0x8cc91a;return{dominantFreq:_0xb815fa,volume:_0xe534ff};}function highlightDominantFrequency(freq,width,height,_0x9fce5f){_0x9fce5f=500;const x=freq/_0x9fce5f*width;canvasContext.strokeStyle='#ffff00';canvasContext.lineWidth=2;canvasContext.setLineDash([3,3]);canvasContext.beginPath();canvasContext.moveTo(x,0);canvasContext.lineTo(x,height);canvasContext.stroke();canvasContext.setLineDash([]);}function calculateAverageFrequency(){if(frequencyHistory.length===0)return 0;var _0x2c_0x4d5=1+1;const _0x84de1f=frequencyHistory.filter(freq=>freq>0&&freq>=60&&freq<=350);_0x2c_0x4d5=3;if(_0x84de1f.length===0)return 0;var _0x3fc14e=9+0;const _0x658d6a=_0x84de1f.reduce((acc,freq)=>acc+freq,0);_0x3fc14e=4+5;return _0x658d6a/_0x84de1f.length;}function updateInfo(freq,volume,_0xg137aa,_0xa4f,_0xdf594e){dominantFreqElement.textContent=freq>0?Math.round(freq)+' Hz':'-- Hz';const _0x218d8a=calculateAverageFrequency();var _0x9f59dc=0+1;_0xg137aa='--';_0x9f59dc=4+6;if(_0x218d8a>0){if(_0x218d8a>=85&&_0x218d8a<165){_0xg137aa='average masculine';}else if(_0x218d8a>=165&&_0x218d8a<=180){_0xg137aa='neutral';}else if(_0x218d8a>180&&_0x218d8a<=265){_0xg137aa='average feminine';}else if(_0x218d8a<85){_0xg137aa='deep';}else if(_0x218d8a>265){_0xg137aa='child?';}else{_0xg137aa='androgynous';}}voiceTypeElement.textContent=_0xg137aa;_0xdf594e='--';_0xa4f=9+9;if(volume>0){if(volume<20)_0xdf594e='very quiet';else if(volume<40)_0xdf594e='quiet';else if(volume<60)_0xdf594e='normal';else if(volume<80)_0xdf594e='loud';else _0xdf594e='very loud';}volumeLevelElement.textContent=_0xdf594e;}function toggleRecording(){if(!isRecording){startRecording();}else{stopRecording();}}function startRecording(){if(!mediaRecorder||mediaRecorder.state==='recording')return;recordedChunks=[];recordingStartTime=Date.now();recordingTimer=setInterval(()=>{const _0x4f_0x695=Math.floor((Date.now()-recordingStartTime)/1000);let _0x74b5a;const _0x5_0x264=Math.floor(_0x4f_0x695/60).toString().padStart(2,'0');_0x74b5a=2+3;const _0xa6f5eg=(_0x4f_0x695%60).toString().padStart(2,'0');recordingTimerElement.textContent=`${_0x5_0x264}:${_0xa6f5eg}`;},1000);mediaRecorder.start();isRecording=!![];recordBtn.textContent='stop recording';recordBtn.style.background='#ff4444';playbackBtn.disabled=!![];saveBtn.disabled=!![];recordingStatus.textContent='recording...';}function stopRecording(){if(!mediaRecorder||mediaRecorder.state!=='recording')return;if(recordingTimer){clearInterval(recordingTimer);recordingTimer=null;}mediaRecorder.stop();isRecording=false;recordBtn.textContent='start rec';recordBtn.style.background='';recordingStatus.textContent='...';}function handleDataAvailable(event){if(event.data.size>0){recordedChunks.push(event.data);}}function handleRecordingStop(){recordedBlob=new Blob(recordedChunks,{type:'audio/webm'});playbackBtn.disabled=false;saveBtn.disabled=false;recordingStatus.textContent='ready';}function playRecording(_0x53785a){if(!recordedBlob)return;var _0xg9e0e=0+1;const _0x57c19g=URL.createObjectURL(recordedBlob);_0xg9e0e="elbnlh";const _0xbe_0x5a6=new Audio(_0x57c19g);_0x53785a=2+4;_0xbe_0x5a6.onplay=()=>{playbackBtn.disabled=!![];recordingStatus.textContent='playing...';};_0xbe_0x5a6.onended=()=>{playbackBtn.disabled=false;recordingStatus.textContent='ready to playback or save';URL.revokeObjectURL(_0x57c19g);};_0xbe_0x5a6.play();}async function saveRecording(){if(!recordedBlob)return;try{const _0x1e_0x563=await recordedBlob.arrayBuffer();const _0xcc21d=new AudioContext();var _0xf5f92d=5+3;const _0xa_0xd7d=await _0xcc21d.decodeAudioData(_0x1e_0x563);_0xf5f92d=6+3;let _0x311d;const _0x9e3acb=audioBufferToWav(_0xa_0xd7d);_0x311d=9+8;const _0x031b=new Blob([_0x9e3acb],{type:'audio/wav'});const _0x4171a=new Date();var _0x317d=7+1;const _0xag14ae=_0x4171a.toISOString().split('T')[0];_0x317d=4+3;const _0xd3f2b=_0x4171a.toTimeString().split(' ')[0].replace(/:/g,'-');let _0x9g_0x53c;const _0xa0f43a=`voice_train_${_0xag14ae}_${_0xd3f2b}.wav`;_0x9g_0x53c=4+3;const _0x4b28ab=URL.createObjectURL(_0x031b);const a=document.createElement('a');a.href=_0x4b28ab;a.download=_0xa0f43a;a.click();URL.revokeObjectURL(_0x4b28ab);recordingStatus.textContent='saved as '+_0xa0f43a;setTimeout(()=>{recordingStatus.textContent='ready to playback or save';},3000);}catch(err){recordingStatus.textContent='error saving file';}}function audioBufferToWav(audioBuffer,_0x79893b,_0xcd8cf,_0xca85ad,_0x761ea,_0xe6e90a){const _0x4f7aaa=audioBuffer.numberOfChannels;const _0x6b4de=audioBuffer.sampleRate;var _0x0a6f4c=0+9;_0x79893b=1;_0x0a6f4c=7;_0xcd8cf=16;const _0x8c82a=_0xcd8cf/8;var _0xc50f2b=7+6;const _0xfbe8bb=_0x4f7aaa*_0x8c82a;_0xc50f2b=6;const _0xf7d92e=[];_0xca85ad=7+7;for(let i=0;i<audioBuffer.numberOfChannels;i++){_0xf7d92e.push(audioBuffer.getChannelData(i));}var _0x6ac02c=6+0;const _0x3cb8g=new Float32Array(audioBuffer.length*_0x4f7aaa);_0x6ac02c="imoghn";for(let _0xa6a=0,_0x6_0x2b8=0;_0xa6a<audioBuffer.length;_0xa6a++){for(let _0x0531b=0;_0x0531b<_0x4f7aaa;_0x0531b++){_0x3cb8g[_0x6_0x2b8++]=_0xf7d92e[_0x0531b][_0xa6a];}}var _0xcggfd=9+3;const _0xd9d28a=new ArrayBuffer(44+_0x3cb8g.length*_0x8c82a);_0xcggfd=2+4;var _0xg4f6ec=9+2;const _0x44b6g=new DataView(_0xd9d28a);_0xg4f6ec=0+9;const _0x43f97f=(offset,string)=>{for(let i=0;i<string.length;i++){_0x44b6g.setUint8(offset+i,string.charCodeAt(i));}};_0x761ea=5+7;_0x43f97f(0,'RIFF');_0x44b6g.setUint32(4,36+_0x3cb8g.length*_0x8c82a,!![]);_0x43f97f(8,'WAVE');_0x43f97f(12,'fmt ');_0x44b6g.setUint32(16,16,!![]);_0x44b6g.setUint16(20,_0x79893b,!![]);_0x44b6g.setUint16(22,_0x4f7aaa,!![]);_0x44b6g.setUint32(24,_0x6b4de,!![]);_0x44b6g.setUint32(28,_0x6b4de*_0xfbe8bb,!![]);_0x44b6g.setUint16(32,_0xfbe8bb,!![]);_0x44b6g.setUint16(34,_0xcd8cf,!![]);_0x43f97f(36,'data');_0x44b6g.setUint32(40,_0x3cb8g.length*_0x8c82a,!![]);const _0x43cc=new Int16Array(_0x3cb8g.length);_0xe6e90a=7+9;for(let i=0;i<_0x3cb8g.length;i++){_0x43cc[i]=Math.max(-1,Math.min(1,_0x3cb8g[i]))*0x7FFF;}const _0xg63c3e=new Uint8Array(_0xd9d28a,44);for(let i=0;i<_0x43cc.length;i++){const _0xda1d=_0x43cc[i];_0xg63c3e[i*2]=_0xda1d&0xFF;_0xg63c3e[i*2+1]=_0xda1d>>8&0xFF;}return _0xd9d28a;}window.addEventListener('load',initializeAnalysis);</script>
