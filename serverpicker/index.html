<!doctypehtml><html lang=en><meta charset=UTF-8><meta content="width=device-width,initial-scale=1"name=viewport><title>steam sdr firewall manager</title><link href=https://cdn.jsdelivr.net/gh/ekmas/cs16.css@main/css/cs16.min.css rel=stylesheet><style>body{margin:0;padding:0;background-image:url(https://files.catbox.moe/likszt.png);background-size:cover;background-position:center;background-repeat:no-repeat;min-height:100vh;display:flex;justify-content:center;align-items:center;color:#fff;padding:20px}.centered{display:flex;flex-direction:column;justify-content:center;align-items:center;width:100%}.cs-dialog{position:relative;display:inline-block;width:900px;max-width:95vw}.heading{position:absolute;top:10px;left:10px;right:10px;display:flex;justify-content:space-between;align-items:center}.content-area{padding:45px 23px 23px 23px}.status-box{padding:10px;margin-bottom:15px;border:1px solid rgba(255,255,255,.3);background:rgba(0,0,0,.3);text-align:center;font-size:12px}.status-box.loading{border-color:#4a9eff;background:rgba(74,158,255,.1)}.status-box.success{border-color:#4ade80;background:rgba(74,222,128,.1)}.status-box.error{border-color:#f87171;background:rgba(248,113,113,.1)}.button-row{display:flex;gap:5px;margin-bottom:15px;flex-wrap:wrap}.servers-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:10px;margin-bottom:20px;max-height:400px;overflow-y:auto;padding:10px;background:rgba(0,0,0,.2);border:1px solid rgba(255,255,255,.2)}.server-card{border:1px solid rgba(255,255,255,.3);padding:10px;cursor:pointer;transition:all .2s ease;background:rgba(0,0,0,.4);font-size:11px}.server-card:hover{background:rgba(255,255,255,.1);border-color:rgba(255,255,255,.6)}.server-card.selected{background:rgba(74,158,255,.3);border-color:#4a9eff}.server-card .location{font-weight:700;font-size:13px;margin-bottom:5px}.server-card .info{opacity:.8;margin-bottom:3px}.command-section{margin-top:15px}.command-section h3{font-size:14px;margin-bottom:10px;text-align:center}.command-box{background:rgba(0,0,0,.6);padding:15px;border:1px solid rgba(255,255,255,.3);font-family:"courier new",monospace;font-size:11px;overflow-x:auto;white-space:pre-wrap;word-break:break-all;max-height:200px;overflow-y:auto}.empty-state{text-align:center;padding:40px;opacity:.7}menu.footer-btns{position:relative;margin:0;padding:0}.servers-grid::-webkit-scrollbar{width:0}</style><div class=centered><div class=cs-dialog><div class=heading><div class=wrapper><div class=icon></div><p class=text>cs2 server picker</div><button class="cs-btn close"onclick=location.reload()></button></div><header id=header><div class=content-area><div class="loading status-box"id=status></div><div class=button-row><button class=cs-btn onclick=loadServers()>reload</button> <button class=cs-btn onclick=selectAll()>select all</button> <button class=cs-btn onclick=deselectAll()>remove all</button></div><div class=servers-grid id=servers></div><div class=command-section><h3>powershell command (run as admin):</h3><div class=command-box id=commandBox><div id=command>select at least one server</div></div></div></div></header><menu class=footer-btns><button class=cs-btn onclick=copyCommand()>copy</button> <button class=cs-btn onclick=location.reload()>reset</button></menu></div></div><script>let serversData={},selectedServers=new Set,lastUserCoords=null;async function loadServers(){const e=document.getElementById("status");try{e.textContent="getting your location...";const t=await fetch("http://ip-api.com/json/"),s=await t.json();lastUserCoords={lat:s.lat,lng:s.lon},e.textContent="loading servers...";const r=await fetch("https://corsproxy.io/?url=https://api.steampowered.com/ISteamApps/GetSDRConfig/v1/?appid=730"),a=await r.json();serversData=a.pops||{},selectedServers.clear(),renderServers(),updateCommand(),e.className="status-box success",e.textContent=`loaded ${Object.keys(serversData).length} servers from steam api (location: ${s.city}, ${s.country})`}catch(t){e.className="status-box error",e.textContent="failed to load server list",console.error("error loading servers:",t)}}function calculateLatency(e,t){if(!lastUserCoords)return null;const s=lastUserCoords.lat,r=lastUserCoords.lng,a=(e-s)*(Math.PI/180),n=(t-r)*(Math.PI/180),o=Math.sin(a/2)**2+Math.cos(s*(Math.PI/180))*Math.cos(e*(Math.PI/180))*Math.sin(n/2)**2,l=6371*(2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o)))/2e5*2e3+10;return Math.round(l)}function renderServers(){const e=document.getElementById("servers");if(0===Object.keys(serversData).length)return void(e.innerHTML='<div class="empty-state">no servers found</div>');e.innerHTML="";const t=Object.entries(serversData).map((([e,t])=>{let s=null;return t.geo&&t.geo.length>=2&&(s=calculateLatency(t.geo[1],t.geo[0])),{code:e,data:t,ping:s}}));t.sort(((e,t)=>null===e.ping?1:null===t.ping?-1:e.ping-t.ping)),t.forEach((({code:t,data:s,ping:r})=>{if(!s.relays||0===s.relays.length)return;const a=document.createElement("div");a.className="server-card",a.onclick=()=>toggleServer(t);const n=s.relays.length,o=s.relays.map((e=>e.ipv4)).join(", "),l=null!==r?`~${r}ms`:"n/a";a.innerHTML=`\n                    <div class="location">${s.desc} <span style="color: #4ade80;">${l}</span></div>\n                    <div class="info">code: ${t.toUpperCase()}</div>\n                    <div class="info">relays: ${n}</div>\n                    <div class="info" style="font-size: 10px; margin-top: 5px;">${o}</div>\n                `,e.appendChild(a)}))}function toggleServer(e){selectedServers.has(e)?selectedServers.delete(e):selectedServers.add(e),updateUI()}function selectAll(){Object.keys(serversData).forEach((e=>{serversData[e].relays&&serversData[e].relays.length>0&&selectedServers.add(e)})),updateUI()}function deselectAll(){selectedServers.clear(),updateUI()}function updateUI(){document.querySelectorAll(".server-card").forEach((e=>{const t=e.querySelector(".info").textContent.replace("code: ","").toLowerCase();selectedServers.has(t)?e.classList.add("selected"):e.classList.remove("selected")})),updateCommand()}function updateCommand(){const e=document.getElementById("command");if(0===selectedServers.size)return void(e.textContent="select at least one server");const t=[];if(Object.entries(serversData).forEach((([e,s])=>{!selectedServers.has(e)&&s.relays&&s.relays.forEach((e=>{e.ipv4&&t.push(e.ipv4)}))})),0===t.length)return void(e.textContent='Remove-NetFirewallRule -DisplayName "cs2 server picker" -ErrorAction SilentlyContinue');const s=`Remove-NetFirewallRule -DisplayName "cs2 server picker" -ErrorAction SilentlyContinue\nNew-NetFirewallRule -DisplayName "cs2 server picker" -Direction Outbound -Action Block -RemoteAddress ${t.join(",")} -Protocol UDP -Enabled True`;e.textContent=s}function copyCommand(){const e=document.getElementById("command").textContent;navigator.clipboard?navigator.clipboard.writeText(e).then((()=>{alert("powershell command copied")})).catch((()=>{fallbackCopy(e)})):fallbackCopy(e)}loadServers();</script>
