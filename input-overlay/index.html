<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>input overlay configurator</title>
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/ekmas/cs16.css@main/css/cs16.min.css">
    <link rel="stylesheet" type="text/css" href="style.css">
</head>

<body>
    <div class="overlay-container" id="overlay">
        <div class="container">
            <div class="top-section">
                <div class="status" id="status">connecting...</div>
                <div class="keyboard-section" id="keyboard-target"></div>
            </div>
            <div class="bottom-section" id="mouse-target"></div>
        </div>
    </div>

    <div class="centered" id="configurator">
        <div class="cs-dialog">
            <div class="heading" style="margin-left: 55%; scale: 2">
                <div class="wrapper">
                    <div class="text">input overlay configurator</div>
                </div>
            </div>

            <div class="content config-layout">
                <div class="config-column">
                    <fieldset class="cs-fieldset preview-fieldset">
                        <legend>instructions</legend>
                        <div style="margin-left: 18px; margin-top: -14px;">
                            <ol>
                                <li>install <a href="https://github.com/univrsal/input-overlay"
                                        target="_blank">input-overlay
                                        plugin</a> in obs</li>
                                <li>enable websocket server in plugin settings</li>
                                <li>check the port number (usually 16899)</li>
                                <li>generate the overlay link</li>
                                <li>create a new browser source in obs</li>
                                <li>paste the link into the browser source</li>
                            </ol>
                        </div>
                    </fieldset>
                    <fieldset class="cs-fieldset">
                        <legend>connection</legend>
                        <div class="nested-grid-2">
                            <div class="cs-form-group">
                                <label class="cs-input__label">address</label>
                                <input class="cs-input config-input" id="wsaddress" type="text" value="localhost">
                            </div>
                            <div class="cs-form-group">
                                <label class="cs-input__label">port</label>
                                <input class="cs-input config-input" id="wsport" type="number" value="16899">
                            </div>
                        </div>
                    </fieldset>

                    <fieldset class="cs-fieldset">
                        <legend>style & animation</legend>
                        <div class="nested-grid-2">
                            <div class="cs-form-group">
                                <label class="cs-input__label">active color</label>
                                <div class="color-input-group">
                                    <input id="activecolor" class="config-input color-picker" type="color"
                                        value="#8b5cf6">
                                    <input id="activecolorhex" class="cs-input config-input color-hex-input" type="text"
                                        maxlength="7" value="#8b5cf6">
                                </div>
                            </div>
                            <div class="cs-form-group">
                                <label class="cs-input__label">key background color</label>
                                <div class="color-input-group">
                                    <input id="backgroundcolor" class="config-input color-picker" type="color"
                                        value="#1a1a1a">
                                    <input id="backgroundcolorhex" class="cs-input config-input color-hex-input"
                                        type="text" maxlength="7" value="#1a1a1a">
                                </div>
                            </div>
                            <div class="cs-form-group">
                                <label class="cs-input__label">outline color</label>
                                <div class="color-input-group">
                                    <input id="outlinecolor" class="config-input color-picker" type="color"
                                        value="#4f4f4f">
                                    <input id="outlinecolorhex" class="cs-input config-input color-hex-input"
                                        type="text" maxlength="7" value="#4f4f4f">
                                </div>
                            </div>
                            <div class="cs-form-group">
                                <label class="cs-input__label">active font color</label>
                                <div class="color-input-group">
                                    <input id="fontcolor" class="config-input color-picker" type="color"
                                        value="#ffffff">
                                    <input id="fontcolorhex" class="cs-input config-input color-hex-input" type="text"
                                        maxlength="7" value="#ffffff">
                                </div>
                            </div>
                            <div class="cs-form-group">
                                <label class="cs-input__label">inactive font color</label>
                                <div class="color-input-group">
                                    <input id="inactivecolor" class="config-input color-picker" type="color"
                                        value="#808080">
                                    <input id="inactivecolorhex" class="cs-input config-input color-hex-input"
                                        type="text" maxlength="7" value="#808080">
                                </div>
                            </div>
                            <div class="cs-form-group">
                                <label class="cs-input__label">font family</label>
                                <select class="cs-select config-input" id="fontfamily" style="max-height: 23px; font-size: 12px;">
                                    <option value="">system default</option>
                                    <option value="roboto">roboto</option>
                                    <option value="open sans">open sans</option>
                                    <option value="lato">lato</option>
                                    <option value="montserrat">montserrat</option>
                                    <option value="poppins">poppins</option>
                                </select>
                            </div>
                            <div class="cs-form-group full-width" style="margin-top: 5px;">
                                <div class="cs-checkbox">
                                    <input type="checkbox" class="config-input" id="hidemouse">
                                    <label for="hidemouse" class="cs-checkbox__label">hide mouse buttons</label>
                                </div>
                            </div>
                        </div>
                        <br>
                        <div class="nested-grid-2">
                            <div class="cs-slider">
                                <div id="glowradiusvalue" class="value">24px</div>
                                <div class="cs-ruler"></div>
                                <input id="glowradius" class="config-input" max="80" min="0" step="2" type="range"
                                    value="24">
                                <label>glow radius</label>
                            </div>

                            <div class="cs-slider">
                                <div id="borderradiusvalue" class="value">8px</div>
                                <div class="cs-ruler"></div>
                                <input id="borderradius" class="config-input" max="40" min="0" step="1" type="range"
                                    value="8">
                                <label>border radius</label>
                            </div>

                            <div class="cs-slider">
                                <div id="pressscalevalue" class="value">1.05x</div>
                                <div class="cs-ruler"></div>
                                <input id="pressscale" class="config-input" max="250" min="100" step="5" type="range"
                                    value="105">
                                <label>press scale</label>
                            </div>

                            <div class="cs-slider">
                                <div id="animationspeedvalue" class="value">1.0x</div>
                                <div class="cs-ruler"></div>
                                <input id="animationspeed" class="config-input" max="300" min="50" step="10"
                                    type="range" value="100">
                                <label>speed</label>
                            </div>

                            <div class="cs-slider">
                                <div id="scalevalue" class="value">1.0x</div>
                                <div class="cs-ruler"></div>
                                <input id="scale" class="config-input" max="200" min="50" step="10" type="range"
                                    value="100">
                                <label>global scale</label>
                            </div>

                            <div class="cs-slider">
                                <div id="opacityvalue" class="value">100%</div>
                                <div class="cs-ruler"></div>
                                <input id="opacity" class="config-input" max="100" min="0" step="5" type="range"
                                    value="100">
                                <label>opacity</label>
                            </div>
                        </div>
                    </fieldset>
                </div>

                <div class="config-column">
                    <fieldset class="cs-fieldset preview-fieldset">
                        <legend>live preview</legend>

                        <div class="preview-wrapper" id="preview-wrapper">
                            <video class="preview-bg" autoplay muted loop playsinline id="bgvideo">
                                <source id="bgsource" type="video/mp4">
                            </video>
                            <div class="preview-container">
                                <div id="preview-keyboard" class="keyboard-section"></div>
                                <div id="preview-mouse" class="mouse-section"></div>
                            </div>
                        </div>
                    </fieldset>

                    <div class="link-result full-width">
                        <label class="cs-input__label" style="margin-bottom: 5px; display: block;">obs browser source
                            url</label>
                        <div class="link-container">
                            <input class="cs-input" id="generatedlink" readonly type="text">
                            <button class="cs-btn" id="copybtn">copy</button>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
    <script src="script.js"></script>
    <script>
        const video = document.getElementById("bgvideo");
        const source = document.getElementById("bgsource");

        const randomIndex = Math.floor(Math.random() * 2) + 1;
        const path = `./media/preview_gameplay${randomIndex}.mp4`;

        source.src = path;
        video.load();
        video.play();
    </script>
</body>

</html>